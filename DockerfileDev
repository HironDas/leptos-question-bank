FROM lukemathwalker/cargo-chef:latest-rust-1.90.0

RUN apt-get update && apt-get install lld clang -y
RUN wget https://github.com/cargo-bins/cargo-binstall/releases/latest/download/cargo-binstall-x86_64-unknown-linux-musl.tgz
RUN tar -xvf cargo-binstall-x86_64-unknown-linux-musl.tgz
RUN cp cargo-binstall /usr/local/cargo/bin

# Install required tools
RUN cargo binstall -y cargo-leptos

# Optional: install additional tools like wasm32 target
RUN rustup target add wasm32-unknown-unknown

WORKDIR /app